#  
# 
# 
# Yuan Yao@KMS 2025-04-01
 
import os

# 定义基本目录
base_dir = r'G:\2024MangShi_palm\2024'

# 台站对应关系字典（从文件中读取）
station_mapping = {
    '453037443': 'D001',
    '453037394': 'D002',
    '453037359': 'D003',
    '453037360': 'D004',
    '453037433': 'D005',
    '453037355': 'D006',
    '453037395': 'D007',
    '453037429': 'D008',
    '453037432': 'D009',
    '453037386': 'D010',
    '453037411': 'D011',
    '453037391': 'D012',
    '453037407': 'D013',
    '453037363': 'D014',
    '453037448': 'D015',
    '453037409': 'D016',
    '453037379': 'D017',
    '453037435': 'D018',
    '453037401': 'D019',
    '453037422': 'D020',
    '453037369': 'D021',
    '453037439': 'D022',
    '453037437': 'D023',
    '453037366': 'D024',
    '453037420': 'D025',
    '453037392': 'D026',
    '453037408': 'D027',
    '453037404': 'D028',
    '453037444': 'D029',
    '453037416': 'D030',
    '453037368': 'D031',
    '453037418': 'D032',
    '453037402': 'D033',
    '453037371': 'D034',
    '453037423': 'D035',
    '453037352': 'D036',
    '453037436': 'D037',
    '453037353': 'D038',
    '453037367': 'D039',
    '453037405': 'D040',
    '453037442': 'D041',
    '453037440': 'D042',
    '453037370': 'D043',
    '453037400': 'D044',
    '453037413': 'D045',
    '453037390': 'D046',
    '453037434': 'D047',
    '453037398': 'D048',
    '453037449': 'D049',
    '453037381': 'D050',
    '453037445': 'D051',
    '453037425': 'D052',
    '453037426': 'D053',
    '453037382': 'D054',
    '453037397': 'D055',
    '453037358': 'D056',
    '453037431': 'D057',
    '453037365': 'D058',
    '453037430': 'D059',
    '453037380': 'D060',
    '453037396': 'D061',
    '453037427': 'D062',
    '453037374': 'D063',
    '453037375': 'D064',
    '453037451': 'D065',
    '453037388': 'D066',
    '453037414': 'D067',
    '453037377': 'D068',
    '453037376': 'D069',
    '453037364': 'D070',
    '453037373': 'D071',
    '453037385': 'D072',
    '453037424': 'D073',
    '453037389': 'D074',
    '453037410': 'D075',
    '453037399': 'D076',
    '453037406': 'D077',
    '453037383': 'D078',
    '453037419': 'D079',
    '453037378': 'D080',
    # 继续添加其他台站的映射关系
}

# 遍历2024年目录下的所有日期文件夹
for date_folder in os.listdir(base_dir):
    date_folder_path = os.path.join(base_dir, date_folder)
    
    # 确保是目录且符合日期命名规则（YYYYMMDD）
    if os.path.isdir(date_folder_path) and len(date_folder) == 8:
        for file in os.listdir(date_folder_path):
            if file.endswith('.SAC'):
                # 提取文件中的台站编号（例如：453037359 从 KMS.453037359.2024.319.SHE.SAC）
                parts = file.split('.')
                station_number = parts[1]
                
                # 检查台站编号是否在映射字典中
                if station_number in station_mapping:
                    new_station = station_mapping[station_number]
                    new_filename = file.replace(f'KMS.{station_number}', f'MS.{new_station}')
                    old_file_path = os.path.join(date_folder_path, file)
                    new_file_path = os.path.join(date_folder_path, new_filename)
                    
                    # 重命名文件
                    os.rename(old_file_path, new_file_path)
                    print(f'Renamed: {file} -> {new_filename}')